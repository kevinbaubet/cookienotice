!function(p){"use strict";p.CookieNotice=function(e,s){return p.extend(!0,this.settings={},p.CookieNotice.defaults,s),this.elements={body:p("body"),container:e},this.config=this.elements.container.attr("data-config"),this.cookieName="cookienotice",this.triggerTimeout=void 0,this.states={buttonAll:0},this.prepareOptions()?this.init():this},p.CookieNotice.defaults={classes:{prefix:"cookienotice",notice:"notice notice--cookie",noticeOpen:"is-{prefix}-notice-open",modal:"modal modal--cookie",modalOpen:"is-{prefix}-modal-open",serviceHandler:"{prefix}-service-handler",serviceAgreed:"is-agreed",serviceDisagreed:"is-disagreed",btnAgree:"{prefix}-agree",btnDisagree:"{prefix}-disagree",btnCustomize:"{prefix}-customize"},reload:!1,summary:767,cookieDuration:390,tabindexStart:0,afterWrapNotice:void 0,afterWrapModal:void 0,afterWrapServiceHandler:void 0,afterEventsHandler:void 0,onChangeState:void 0},p.CookieNotice.services={},p.CookieNotice.prototype={prepareOptions:function(){return!!navigator.cookieEnabled&&(this.replacePrefixClass(),this.elements.container.length?void 0===this.config||""===this.config?(this.setLog('Attribute "data-config" not found in the container element.',"error"),!1):(this.config=JSON.parse(this.config),!0):(this.setLog("Container element not found.","error"),!1))},init:function(){return this.wrapNotice(),this.loadStates()||(this.setState("all","undefined"),this.notice("show")),this.wrapModal(),this.wrapServiceHandler(),this.eventsHandler(),this},destroy:function(){return this.elements.container.remove(),this.elements.body.removeClass(this.settings.classes.noticeOpen).removeClass(this.settings.classes.modalOpen),this},wrapNotice:function(){let e=[],s=null,i=null;return this.elements.noticeWrapper=p("<div>",{class:this.settings.classes.notice}),void 0!==this.config.notice.description&&""!==this.config.notice.description&&(this.elements.noticeDescription=p("<div>",{class:this.settings.classes.prefix+"-notice-description",html:this.formatDescription(this.config.notice.description)}),this.elements.noticeDescription.appendTo(this.elements.noticeWrapper)),this.elements.noticeActionsWrapper=p("<div>",{class:this.settings.classes.prefix+"-notice-actions"}),void 0!==this.config.notice.agree&&""!==this.config.notice.agree&&(this.elements.btnAgree=p("<button>",{class:this.settings.classes.prefix+"-btn "+this.settings.classes.prefix+"-btn--primary "+this.settings.classes.btnAgree,html:p("<span>",{html:this.config.notice.agree})}).appendTo(this.elements.noticeActionsWrapper)),void 0!==this.config.notice.disagree&&""!==this.config.notice.disagree&&(this.elements.btnDisagree=p("<button>",{class:this.settings.classes.prefix+"-btn "+this.settings.classes.prefix+"-btn--secondary "+this.settings.classes.btnDisagree,html:p("<span>",{html:this.config.notice.disagree})}).appendTo(this.elements.noticeActionsWrapper)),void 0!==this.config.modal&&void 0!==this.config.notice.customize&&""!==this.config.notice.customize&&(i=p("<button>",{class:this.settings.classes.prefix+"-btn "+this.settings.classes.prefix+"-btn--tertiary "+this.settings.classes.btnCustomize,html:p("<span>",{html:this.config.notice.customize})}).appendTo(this.elements.noticeActionsWrapper),s=this.elements.body.find("."+this.settings.classes.prefix+"-customize"),e.push(i.get(0)),s.length&&e.push(s.get(0)),this.elements.btnCustomize=p(e)),this.elements.noticeActionsWrapper.appendTo(this.elements.noticeWrapper),this.elements.noticeWrapper.appendTo(this.elements.container),void 0!==this.settings.afterWrapNotice&&this.settings.afterWrapNotice.call({cookieNotice:this,elements:this.elements}),this},notice:function(e){return this.elements.body[("hide"===e?"remove":"add")+"Class"](this.settings.classes.noticeOpen),this},wrapModal:function(){var e=this;return void 0!==e.config.modal&&(e.elements.modalWrapper=p("<div>",{class:e.settings.classes.modal,role:"dialog",tabindex:"-1"}),e.elements.modalHeader=p("<div>",{class:e.settings.classes.prefix+"-modal-header"}),void 0!==e.config.modal.label&&""!==e.config.modal.label&&(p("<"+(e.config.modal.labelTag||"p")+">",{class:e.settings.classes.prefix+"-modal-label",html:e.config.modal.label}).appendTo(e.elements.modalHeader),e.elements.modalWrapper.attr("aria-label",e.config.modal.label)),void 0!==e.config.modal.description&&""!==e.config.modal.description&&p("<div>",{class:e.settings.classes.prefix+"-modal-description",html:e.formatDescription(e.config.modal.description)}).appendTo(e.elements.modalHeader),void 0!==e.config.modal.close&&""!==e.config.modal.close&&(e.elements.modalClose=p("<button>",{class:e.settings.classes.prefix+"-modal-close",html:p("<span>",{class:"sr-only",html:e.config.modal.close})}).appendTo(e.elements.modalHeader)),e.elements.modalHeader.appendTo(e.elements.modalWrapper),e.wrapServices(),e.elements.modalWrapper.appendTo(e.elements.container),void 0!==e.settings.afterWrapModal&&e.settings.afterWrapModal.call({cookieNotice:e,elements:e.elements})),e.elements.modalOverlay=p("<div>",{class:e.settings.classes.prefix+"-modal-overlay"}).appendTo(e.elements.container),e},wrapServices:function(){let d=this;if(void 0!==d.config.services){let i={},t=(p.each(d.config.services,function(e,s){"all"!==e&&(void 0===i[s.group]&&(i[s.group]=[]),i[s.group].push(e))}),d.elements.servicesWrapper=p("<div>",{class:d.settings.classes.prefix+"-services"}),d.config.modal.labelTag||"p");if(-1!==t.indexOf("h")&&(o=parseInt(t.substring(1)),o++,t="h"+o),void 0!==d.config.services.all&&(d.elements.serviceAllWrapper=p("<div>",{class:d.settings.classes.prefix+"-service "+d.settings.classes.prefix+"-service--all","data-service":"all"}),p("<"+t+">",{class:d.settings.classes.prefix+"-service-all-label",html:d.config.services.all.label}).appendTo(d.elements.serviceAllWrapper),d.wrapServiceActions("all").appendTo(d.elements.serviceAllWrapper),"before"===d.config.services.all.position||"both"===d.config.services.all.position)){let e=d.elements.serviceAllWrapper.clone();var o=d.states.buttonAll;let s=e.find("input"),i=s.attr("id");d.states.buttonAll++;o=i.replace("-"+o,"-"+d.states.buttonAll);e.find("label").attr("for",o),s.attr("id",o),e.appendTo(d.elements.servicesWrapper),setTimeout(function(){d.elements.serviceAllWrapper=d.elements.servicesWrapper.find("."+d.settings.classes.prefix+"-service."+d.settings.classes.prefix+"-service--all")},50)}let n=p("<ul>"),l=0,r=Object.keys(i).length;if(p.each(i,function(e,a){var s=p("<li>",{class:d.settings.classes.prefix+"-group "+d.settings.classes.prefix+"-group--"+e}).appendTo(n);if(void 0!==d.config.groups[e].label&&""!==d.config.groups[e].label&&p("<"+t+">",{class:d.settings.classes.prefix+"-group--label",html:d.config.groups[e].label}).appendTo(s),void 0!==d.config.groups[e].description&&""!==d.config.groups[e].description&&p("<p>",{class:d.settings.classes.prefix+"-group--description",html:d.formatDescription(d.config.groups[e].description)}).appendTo(s),a.length){let c=p("<ul>");p.each(a,function(e,s){let i=p("<li>",{class:d.settings.classes.prefix+"-service "+d.settings.classes.prefix+"-service--"+s,"data-service":s}),t=p("<div>",{class:d.settings.classes.prefix+"-service-label-wrapper"}),n,o={class:d.settings.classes.prefix+"-service-label",html:d.config.services[s].label};if((n=void 0!==d.config.services[s].url&&""!==d.config.services[s].url?(o.href=d.config.services[s].url,o.tabindex=d.settings.tabindexStart,p("<a>",o)):p("<span>",o)).appendTo(t),void 0!==d.config.services[s].description&&""!==d.config.services[s].description){let e=p("<p>",{class:d.settings.classes.prefix+"-service-description",html:d.formatDescription(d.config.services[s].description)});e.appendTo(t)}l===r-1&&e===a.length-1&&i.addClass("is-last"),t.appendTo(i),d.wrapServiceActions(s).appendTo(i),i.appendTo(c)}),c.appendTo(s)}l++}),n.appendTo(d.elements.servicesWrapper),void 0!==d.config.services.all&&("after"===d.config.services.all.position||"both"===d.config.services.all.position))if("both"===d.config.services.all.position){let e=d.elements.serviceAllWrapper.clone();e.appendTo(d.elements.servicesWrapper),d.elements.serviceAllWrapper.push(e)}else d.elements.serviceAllWrapper.appendTo(d.elements.servicesWrapper);d.elements.servicesWrapper.appendTo(d.elements.modalWrapper),d.elements.serviceAction=d.elements.servicesWrapper.find("."+d.settings.classes.prefix+"-service-action")}},wrapServiceActions:function(t){var n=this,o=p("<div>",{class:n.settings.classes.prefix+"-service-actions"});if(void 0!==n.config.services.all.agree&&""!==n.config.services.all.agree&&void 0!==n.config.services.all.disagree&&""!==n.config.services.all.disagree){let e=n.getState(t);if("all"===t){let i=0,t=!1;p.each(p.CookieNotice.services,function(e,s){!0===s&&i++,"undefined"===s&&(t=!0)});var c=i===Object.keys(p.CookieNotice.services).length;e=t||0<i&&!c?"undefined":c}let s=p("<span>",{class:n.settings.classes.prefix+"-service-action "+("undefined"===e?"":e?n.settings.classes.serviceAgreed:n.settings.classes.serviceDisagreed)}),i=n.settings.classes.prefix+"-service-action--"+t;"all"===t&&"both"===n.config.services.all.position&&(i+="-"+n.states.buttonAll),p("<span>",{class:n.settings.classes.prefix+"-service-action-input",tabindex:n.settings.tabindexStart,html:p("<input>",{type:"checkbox",class:n.settings.classes.prefix+"-service-action-input--checkbox",id:i,name:t,value:e,checked:!0===e})}).appendTo(s),p("<label>",{for:i,class:n.settings.classes.prefix+"-service-action-label",html:"undefined"===e?n.config.services.all.customize:n.config.services.all[e?"agree":"disagree"],"aria-hidden":!0}).appendTo(s),s.appendTo(o)}return o},modal:function(e,s){let o=this;void 0!==e&&("show"!==s||"click"!==e.type&&("keyup"!==e.type||"Enter"!==e.key&&" "!==e.key)?"hide"===s&&("click"===e.type||"keydown"===e.type&&"Escape"===e.key)&&(o.elements.body.removeClass(o.settings.classes.modalOpen),o.elements.modalClose.off("click.cookienotice.modalClose keydown.cookienotice.modalClose"),o.elements.modalOverlay.off("click.cookienotice.modalOverlay"),p(document).off("keydown.cookienotice.modalEscape"),o.elements.serviceAction.off("click.cookienotice.serviceAction keydown.cookienotice.serviceAction"),!o.settings.reload&&void 0!==o.elements.openBtn&&o.elements.openBtn.length&&(e.preventDefault(),setTimeout(function(){o.elements.openBtn.focus()},100)),o.getCookie(o.cookieName)||o.notice("show"),o.reload()):(void 0!==o.triggerTimeout&&clearTimeout(o.triggerTimeout),o.triggerTimeout=setTimeout(function(){e.preventDefault(),o.elements.openBtn=p(e.currentTarget),o.elements.body.addClass(o.settings.classes.modalOpen),setTimeout(function(){o.elements.modalWrapper.focus()},100),o.getCookie(o.cookieName)||o.notice("hide"),o.elements.modalClose.length&&o.elements.modalClose.on({"click.cookienotice.modalClose":function(e){o.modal(e,"hide")},"keydown.cookienotice.modalClose":function(e){"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),o.elements.servicesWrapper.find(".is-last ."+o.settings.classes.prefix+"-service-action-input").focus())}}),o.elements.modalOverlay.length&&o.elements.modalOverlay.one("click.cookienotice.modalOverlay",function(e){o.modal(e,"hide")}),p(document).on("keydown.cookienotice.modalEscape",function(e){o.modal(e,"hide")}),o.elements.serviceAction.on("click.cookienotice.serviceAction keydown.cookienotice.serviceAction",function(e){let s=p(e.currentTarget),i=s.closest("."+o.settings.classes.prefix+"-service");if(" "===e.key&&e.preventDefault(),"click"===e.type||"keydown"===e.type&&("Enter"===e.key||" "===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key)){let e=s.find("input");var t=e.prop("checked"),n=i.attr("data-service");void 0!==n&&o.setState(n,!t)}"keydown"===e.type&&"Tab"===e.key&&!e.shiftKey&&i.hasClass("is-last")&&(e.preventDefault(),o.elements.modalClose.focus())})},100)))},wrapServiceHandler:function(){let a=this;void 0!==a.config.services.all.allow&&""!==a.config.services.all.allow&&(a.elements.serviceHandlers=a.elements.body.find("[data-cookienotice]"),a.elements.serviceHandlers.length&&a.elements.serviceHandlers.each(function(e,n){if(!(n=p(n)).hasClass(a.settings.classes.serviceHandler+"-container")){let t=n.attr("data-cookienotice-service");if(void 0!==t&&void 0!==a.config.services[t]){var o=a.getState(t),c=a.config.services[t];n.addClass(a.settings.classes.serviceHandler+"-container "+(o&&"undefined"!==o?a.settings.classes.serviceAgreed:a.settings.classes.serviceDisagreed));let e=p("<div>",{class:a.settings.classes.serviceHandler,"aria-hidden":!(!o||"undefined"===o)}),s=(void 0!==a.config.services.all.disabled&&p("<p>",{class:a.settings.classes.serviceHandler+"-label",html:a.config.services.all.disabled.replace("{service}",c.label)}).appendTo(e),p("<button>",{class:a.settings.classes.serviceHandler+"-btn "+a.settings.classes.prefix+"-btn "+a.settings.classes.prefix+"-btn--secondary ",html:a.config.services.all.allow.replace("{service}",c.label)}).appendTo(e)),i=(e.appendTo(n),{cookieNotice:a,elements:a.elements,handler:n,service:t});!o&&n.is("a")&&n.on("click.cookienotice",function(e){e.stopImmediatePropagation(),e.preventDefault()}),s.on("click",function(){a.agree(t),n.trigger("agree.cookienotice",[i])}),void 0!==a.settings.afterWrapServiceHandler&&a.settings.afterWrapServiceHandler.call(i)}}}))},eventsHandler:function(){let s=this;return!1!==s.settings.summary&&s.elements.noticeDescription.length&&void 0!==s.config.notice.summary&&""!==s.config.notice.summary&&p(window).width()<=s.settings.summary&&(s.elements.noticeDescription.html(s.formatDescription(s.config.notice.summary)),s.elements.noticeDescription.on("click",function(e){p(e.target).is("a")||s.elements.noticeDescription.html()===s.config.notice.description||s.elements.noticeDescription.html(s.formatDescription(s.config.notice.description))})),void 0!==s.elements.btnAgree&&s.elements.btnAgree.length&&s.elements.btnAgree.one("click.cookienotice.btnAgree",function(){s.agree(),s.notice("hide"),s.reload()}),void 0!==s.elements.btnDisagree&&s.elements.btnDisagree.length&&s.elements.btnDisagree.one("click.cookienotice.btnDisagree",function(){s.disagree(),s.notice("hide"),s.reload()}),void 0!==s.elements.btnCustomize&&s.elements.btnCustomize.length&&s.elements.btnCustomize.on("click.cookienotice.btnCustomize keyup.cookienotice.btnCustomize",function(e){s.modal(e,"show")}),void 0!==s.settings.afterEventsHandler&&s.settings.afterEventsHandler.call({cookieNotice:s,elements:s.elements}),s},agree:function(e){return this.setState(e=e||"all",!0)},disagree:function(e){return this.setState(e=e||"all",!1)},setState:function(t,n){let o=this;var e;return"all"===t&&void 0!==o.config.services?p.each(o.config.services,function(e){"all"!==e&&(p.CookieNotice.services[e]=n)}):p.CookieNotice.services[t]=n,"undefined"!==n&&(o.elements.serviceAllWrapper.each(function(e,s){let i=p(s).find("."+o.settings.classes.prefix+"-service-action");i.length&&(i.removeClass(o.settings.classes.serviceAgreed),i.removeClass(o.settings.classes.serviceDisagreed),i.find("input").prop("checked",!1),i.find("label").html(o.config.services.all.customize))}),o.elements.serviceAction.length&&o.elements.serviceAction.each(function(e,i){let s=(i=p(i)).closest("."+o.settings.classes.prefix+"-service");if(s.attr("data-service")===t||"all"===t){let e=i.find("input"),s=i.find("label");i[(n?"add":"remove")+"Class"](o.settings.classes.serviceAgreed),i[(n?"remove":"add")+"Class"](o.settings.classes.serviceDisagreed),e.prop("checked",n),s.html(o.config.services.all[n?"agree":"disagree"])}}),o.elements.serviceHandlers.length&&o.elements.serviceHandlers.each(function(e,s){if((s=p(s)).attr("data-cookienotice-service")===t||"all"===t){let e=s.find("."+o.settings.classes.serviceHandler);s.removeClass(n?o.settings.classes.serviceDisagreed:o.settings.classes.serviceAgreed),s.addClass(n?o.settings.classes.serviceAgreed:o.settings.classes.serviceDisagreed),e.attr("aria-hidden",n),s.is("a")&&(n?s.off("click.cookienotice"):s.on("click.cookienotice",function(e){e.stopImmediatePropagation(),e.preventDefault()}))}}),o.setCookie(o.cookieName,JSON.stringify(p.CookieNotice.services),this.settings.cookieDuration),e={cookieNotice:o,elements:o.elements,services:p.CookieNotice.services,service:t,state:n},o.elements.container.trigger("changestate.cookienotice",[e]),void 0!==o.settings.onChangeState&&o.settings.onChangeState.call(e)),o},loadStates:function(){var e=this.getCookie(this.cookieName);return!!e&&(e=JSON.parse(e),p.each(e,function(e,s){p.CookieNotice.services[e]=s}),e)},getState:function(e){return void 0!==p.CookieNotice.services[e]?p.CookieNotice.services[e]:"undefined"},isAllowed:function(e){return!0===this.getState(e)},hasConsent:function(){return!!this.getCookie(this.cookieName)},reload:function(){this.settings.reload&&window.location.reload()},getCookie:function(e){let s=new RegExp("(?:; )?"+e+"=([^;]*);?");return s.test(document.cookie)?decodeURIComponent(RegExp.$1):null},setCookie:function(e,s,i,t,n){let o=new Date,c=new Date;t=t||"/",n=n||"https:"===window.location.protocol,c.setTime(o.getTime()+24*i*60*60*1e3),document.cookie=e+"="+s+";expires="+c.toGMTString()+";path="+t+";"+(!0===n?"secure":"")},removeCookie:function(e,s){return this.setCookie(e,"",-1,s)},setLog:function(e,s){s=s||"log",console[s]("CookieNotice: "+e)},formatDescription:function(e){return e.replace("{agree}",this.config.notice.agree).replace("{disagree}",this.config.notice.disagree).replace("{customize}",this.config.notice.customize)},replacePrefixClass:function(){let i=this;return p.each(i.settings.classes,function(e,s){"string"==typeof s&&(i.settings.classes[e]=s.replace(/{prefix}/,i.settings.classes.prefix))}),i}},p.fn.cookieNotice=function(e){return new p.CookieNotice(p(this),e)}}(jQuery);